<div class="my-container">
    <div class="card card-default">
        <div class="card-header">
            <div class="row">
                <div class="col-lg-4">
                    <legend class="main-title">Promotions Users Report</legend>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="row col-12">
                <div class="p-2 col-md-2">
                    <h4 class="text-muted text-thin">Promotions</h4>
                    <ngx-select-dropdown tabindex="0" [multiple]="false" [config]="config" [options]="promotionList" (change)="promotionIdOnChange($event)"></ngx-select-dropdown>
                </div>
                <div class="p-2 col-md-2">
                    <h4 class="text-muted text-thin">From Date</h4>
                    <div class="input-group">
                        <input class="form-control" placeholder="yyyy-mm-dd" name="dp" ngbDatepicker #d_1="ngbDatepicker" id="txt_fromdatetime" [(ngModel)]="datePickerfromdate">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary calendar" (click)="d_1.toggle()" type="button"></button>
                        </div>
                    </div>
                </div>
                <div class="p-2 col-md-2">
                    <h4 class="text-muted text-thin">To Date</h4>
                    <div class="input-group">
                        <input class="form-control" placeholder="yyyy-mm-dd" name="dp1" ngbDatepicker #d_2="ngbDatepicker" id="txt_todatetime" [(ngModel)]="datePickertodate">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary calendar" (click)="d_2.toggle()" type="button"></button>
                        </div>
                    </div>
                </div>
                <div class="p-2">
                    <h4 class="text-muted text-thin">&nbsp;</h4>
                    <button class="mb-1 btn btn-success" (click)='search()' type="button">Search</button>
                </div>
                <div class="p-2" id="todayFilter">
                    <h4 class="text-muted text-thin">&nbsp;</h4>
                    <button class="mb-1 btn btn-success" (click)='setToday()' type="button">Today</button>
                </div>
                <div class="p-2" id="yesterdayFilter">
                    <h4 class="text-muted text-thin">&nbsp;</h4>
                    <button class="mb-1 btn btn-success" (click)='setYesterday()' type="button">Yesterday</button>
                </div>
                <div class="p-2" id="thisWeekFilter">
                    <h4 class="text-muted text-thin">&nbsp;</h4>
                    <button class="mb-1 btn btn-success" (click)='setThisWeek()' type="button">This Week</button>
                </div>
                <div class="p-2" id="thisYearFilter">
                    <h4 class="text-muted text-thin">&nbsp;</h4>
                    <button class="mb-1 btn btn-success" (click)='setThisYear()' type="button">This Year</button>
                </div>
            </div>

            <div>
                <ngx-datatable #table
                               class="material bootstrap no-detail-row"
                               [rows]="rows"
                               [loadingIndicator]="loadingIndicator"
                               [columns]="columns"
                               [columnMode]="'force'"
                               [headerHeight]="50"
                               [footerHeight]="50"
                               [rowHeight]="'auto'"
                               [limit]="10">
                    <ngx-datatable-column *ngFor="let column of columns; let i = index;"
                                          name="{{column.name}}"
                                          prop="{{column.prop}}">
                        <ng-template let-rowIndex="rowIndex"
                                     let-value="value"
                                     let-row="row"
                                     *ngIf="column.prop==='Username'"
                                     ngx-datatable-cell-template>
                            <ng-container *ngIf="value != null && value != 'Not Available'">
                                <a [routerLink]='' (click)='show(row)'>{{value}}</a>
                            </ng-container>
                            <ng-container *ngIf="value == null || value == 'Not Available'">
                                <p>Not Available</p>
                            </ng-container>
                        </ng-template>
                    </ngx-datatable-column>
                </ngx-datatable>
            </div>
            <div>
                Total after user apply promotion : {{totalComeBackUser}}/{{totalUser}}  {{getPercentage}}%
            </div>
        </div>
    </div>
</div>